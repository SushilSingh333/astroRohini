<!-- Popup Modal Form -->
<div class="modal fade" id="leadFormModal" tabindex="-1" aria-labelledby="leadFormModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="leadFormModalLabel">Book a Site Visit</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="text-muted mb-3">Fill in your details and our team will schedule a private walkthrough.</p>
                <form id="leadForm" class="row g-3">
                    <div class="col-12">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-control" name="name" placeholder="Your full name" required>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-control" name="phone" placeholder="+91" required>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" placeholder="you@example.com" required>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Requirement</label>
                        <select class="form-select" name="requirement" required>
                            <option value="">Select your requirement</option>
                            <option value="Retail Shop">Retail Shop</option>
                            <option value="Office Space">Office Space</option>
                            <option value="Corner/Atrium Unit">Corner/Atrium Unit</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-cta w-100">Book Now</button>
                    </div>
                    <div class="col-12 text-center text-muted small">
                        By submitting, you agree to be contacted by our team.
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // Show popup modal on page load
    const leadFormModal = new bootstrap.Modal(document.getElementById('leadFormModal'), {
        backdrop: 'static',
        keyboard: false
    });

    // Check if user has already closed the modal in this session
    const modalClosed = sessionStorage.getItem('leadModalClosed');
    
    // Show modal after a short delay for better UX
    if (!modalClosed) {
        setTimeout(() => {
            leadFormModal.show();
        }, 1000);
    }

    // Track when modal is closed and don't show again in this session
    document.getElementById('leadFormModal').addEventListener('hidden.bs.modal', function () {
        sessionStorage.setItem('leadModalClosed', 'true');
    });

    // Handle lead form submission
    const leadForm = document.getElementById('leadForm');
    if (leadForm) {
        leadForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(this);
            const data = {
                name: formData.get('name'),
                phone: formData.get('phone'),
                email: formData.get('email'),
                requirement: formData.get('requirement')
            };

            // Here you can add your form submission logic
            console.log('Form submitted:', data);

            // Show success message
            alert('Thank you! Our team will contact you shortly.');
            
            // Close modal
            leadFormModal.hide();
            
            // Reset form
            this.reset();
            
            // Mark as closed so it doesn't show again
            sessionStorage.setItem('leadModalClosed', 'true');
        });
    }
</script>
